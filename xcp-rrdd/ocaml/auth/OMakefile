OTHER_CLIBS = -cclib -lpam
OCAMLINCLUDES += ../autogen ../idl/ocaml_backend ../xapi 

StaticCLibrary(auth_stubs, xa_auth xa_auth_stubs)
OCamlLibraryClib(pam, pam, auth_stubs)

section
	OCAML_LIBS += pam
	OCAML_CLIBS += auth_stubs

	OCamlProgram(testauth, testauth)
	OCamlProgram(testauthx, testauthx authx auth_signature)

.PHONY: clean
clean:
	rm -rf $(CLEAN_OBJS) *.aux *.log *.fig

.PHONY: install
install:
	mkdir -p $(DIST)/staging/opt/xensource/bin