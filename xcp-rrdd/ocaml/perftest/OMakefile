OCAML_LIBS+=../idl/ocaml_backend/common ../idl/ocaml_backend/client
OCAMLINCLUDES +=  ../idl/ocaml_backend/ ../autogen/ ../idl ../muxdemux ../xva ../util ../http ../xapi
OCAMLPACKS+=xmlm,xml-light2,stdext,uuid,str

OCamlProgram(perftest, scenario perfutil createVM createpool testtypes perftest tests instrumented_xmlrpcclient ../xapi/xapi_inventory perfdebug)
OCamlProgram(apiperf, perfutil apiperf)
OCamlProgram(histogram, statistics histogram gnuplot testtypes perfdebug graphutil)
OCamlProgram(cumulative_time, cumulative_time gnuplot testtypes perfdebug graphutil)

section
	OCAML_LIBS+=../sexpr/sexpr ../idl/ocaml_backend/server ../util/debug
	OCamlProgram(xmlrpcserver, xmlrpcserver)

.PHONY: clean

clean:
	rm -f *.cmi *.cmx *.cmo *.a *.cma *.cmxa *.run *.opt *.annot *.o

.PHONY: install
install:
        mkdir -p $(DEBUGDIST)
        $(IPROG) perftest $(DEBUGDIST)

