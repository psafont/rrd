OCAMLPACKS += unix xmlm xml-light2 sqlite3 uuid
OCAML_LIBS += ../sexpr/sexpr ../idl/ocaml_backend/common ../idl/ocaml_backend/client ../idl/ocaml_backend/server \
		../util/backtrace ../util/sanitycheck ../util/sigutil ../util/encodings
OCAMLINCLUDES += ../sexpr ../idl ../idl/ocaml_backend \
                 ../autogen ../idl/sql_backend/ ../database/ \
                 ../http/ ../xenops ../muxdemux ../xva \
		 ../netdev ../auth ../license ../client_records ../rfb ../gpg ../xapi

OCamlProgram(xapi-db-upgrade-4.2, xapi-db-upgrade-4.2)
OCamlProgram(xapi-db-process, xapi-db-process)

.PHONY: install
install:
	mkdir -p $(DIST)/staging/opt/xensource/bin
	cp -f xapi-db-process $(DIST)/staging/opt/xensource/bin

.PHONY: sdk-install
sdk-install: install

.PHONY: clean
clean:
	rm -rf $(CLEAN_OBJS) *.aux *.log *.fig xapi
